{% extends "base.html" %}

{% block title %}Timetable{% endblock %}

{% block content %}

<link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css"/>

<style>
th {
    text-align:center;
}

table {
  width: 300%;
  border-collapse: collapse;
}

.hack1 {
  display: table;
  table-layout: fixed;
  width: 100%;
}

.hack2 {
  display: table-cell;
  overflow-x: auto;
  width: 100%;
}

.my-custom-scrollbar {
    position: relative;
    height: 300px;
    overflow: auto;
}

.table-wrapper-scroll-y {
    display: block;
}

</style>    

<br><br>

<!-- TOOLTIP STARTS -->
<div class="tooltip" role="tooltip">
    <div class="tooltip-arrow"></div>
</div>
<!-- TOOLTIP ENDS -->

<!-- UPDATE MODAL STARTS -->
<div class="modal fade bd-example-modal-sm" id="updateModal" tabindex="-1" role="dialog" aria-labelledby="updateModal" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="col text-center">
                <div class="modal-header">
                    <h3 class="modal-title" id="updateModal">Update Type & Remarks
                    <button type="button" class="close" data-dismiss="modal">&times;</button></h3>
                </div>
                <div class="modal-body">
                    Please specify type & remarks.
                    <div class="contact-form">
                        <form action='email_filter' method='post'>
                            <select>
                                <option>Duties</option>
                                <option>On-Leave</option>
                            </select>

                            <select>
                                <option>ICU 1</option>
                                <option>ICU 2</option>
                            </select>
                            <br><br>
                            <input class="contact-button" type='submit' value='Update' />
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- UPDATE MODAL ENDS -->

<!-- COMMENT MODAL STARTS -->
<div class="modal fade bd-example-modal-sm" id="commentModal" tabindex="-1" role="dialog" aria-labelledby="commentModal" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="col text-center">
                <div class="modal-header">
                    <h3 class="modal-title" id="commentModal">Update Type & Remarks
                    <button type="button" class="close" data-dismiss="modal">&times;</button></h3>
                </div>
                <div class="modal-body">
                    Please type in your comment.
                    <div class="contact-form">
                        <form action='email_filter' method='post'>
                            <input type='text' name='comment' placeholder="Comment" class="form-control"/>
                            <br><br>
                            <input class="contact-button" type='submit' value='Update' />
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- COMMENT MODAL ENDS -->

<!-- TIMETABLE STARTS -->
<div class="testimonials" id="timetable_table">
    <div class="container">
        <div class="row">
            <div class="col-md-12 text-center text">
                <h3>Timetable</h3>
                <div class="row">
                    <div class="table-wrapper-scroll-y my-custom-scrollbar">
                    <div class="hack1">
                        <div class="hack2">
                            <table class="table table-bordered table-striped mb-0">
                                <thead>
                                    <tr>
                                        <th></th>
                                        {% for col in column_names %}
                                        <th style="height:5px;width:500px">{{col}}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>
                                
                                <tbody>
                                    {% for row_, data in zip(row_names,row_data) %}
                                    <tr>
                                        <th>{{row_}}</th>
                                        {% for i in data %}
                                            {% for key in i %}
                                                {% if key == "Duty" %}
                                                <td style=background-color:#51E2F5>
                                                    <a href="#" data-toggle="modal" data-target="#updateModal" data-toggle="tooltip"
                                                        title="Remarks from SGForm">{{key}}<br>({{i[key]}})</a>
                                                    <a style="cursor:pointer" href="#" data-toggle="modal"
                                                        data-target="#commentModal"><i id="ellipsis" class="fas fa-ellipsis-v"
                                                            style="color:rgb(158, 155, 155); float:right"></i></a>
                                                </td>
                                                {% elif key == "Training" %}
                                                <td style=background-color:#9DF9EF>
                                                    <a href="#" data-toggle="modal" data-target="#updateModal" data-toggle="tooltip"
                                                        title="Remarks from SGForm">{{key}} ({{i[key]}})</a>
                                                    <a style="cursor:pointer" href="#" data-toggle="modal"
                                                        data-target="#commentModal"><i id="ellipsis" class="fas fa-ellipsis-v"
                                                            style="color:rgb(158, 155, 155); float:right"></i></a>
                                                </td>
                                                {% elif key == "Working" %}
                                                <td style=background-color:#EDF7F6>
                                                    <a href="#" data-toggle="modal" data-target="#updateModal" data-toggle="tooltip"
                                                        title="Remarks from SGForm">{{key}}</a>
                                                    <a style="cursor:pointer" href="#" data-toggle="modal"
                                                        data-target="#commentModal"><i id="ellipsis" class="fas fa-ellipsis-v"
                                                            style="color:rgb(158, 155, 155); float:right"></i></a>
                                                </td>
                                                {% elif key == "Priority Leave" %}
                                                <td style=background-color:#FFA8B6>
                                                    <a href="#" data-toggle="modal" data-target="#updateModal" data-toggle="tooltip"
                                                        title="Remarks from SGForm">{{key}} ({{i[key]}})</a>
                                                    <a style="cursor:pointer" href="#" data-toggle="modal"
                                                        data-target="#commentModal"><i id="ellipsis" class="fas fa-ellipsis-v"
                                                            style="color:rgb(158, 155, 155); float:right"></i></a>
                                                </td>
                                                {% elif key == "Off" %}
                                                <td style=background-color:#A28089>
                                                    <a href="#" data-toggle="modal" data-target="#updateModal" data-toggle="tooltip"
                                                        title="Remarks from SGForm">{{key}} </a>
                                                    <a style="cursor:pointer" href="#" data-toggle="modal"
                                                        data-target="#commentModal"><i id="ellipsis" class="fas fa-ellipsis-v"
                                                            style="color:rgb(158, 155, 155); float:right"></i></a>
                                                </td>
                                                {% endif %}
                                            {% endfor %}						
                                        {% endfor %}
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- TIMETABLE ENDS -->

<!-- CALL SUMMARY STARTS -->
<div class="portfolio" id="call_summary_table">
    <div class="container">
        <div class="row">
            <div class="col-md-12 text-center">
                <h3>Call Summary</h3>
                <div class="row">
                    <div class="hack1">
                        <div class="hack2">
                            <table class="table table-bordered table-striped mb-0">
                                {% for table in call_summary_tables %}
                                {{ table|safe }}
                                {% endfor %}
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- BUTTON STARTS -->
<div class="call-to-action">
    <div style="background-image: url('../static/images/ttsh_building.jpg'); ">
        <div class="call-overlay">
            <div class="container">
                <div class="row">
                    <a class="contact-button" href="">Validate</a>
                    <a class="contact-button" href="{{url_for('download_timetable')}}">Download as PDF</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- BUTTON ENDS -->

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
<script>
    $(document).ready(function() {
    $('#example').DataTable( {
        "pagingType": "full_numbers"
    } );
} );
</script>

{% endblock %}

