{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<style>
th {
    text-align:center;
}

table {
    width: 300%;
    border-collapse: collapse;
}

.hack1 {
    display: table;
    table-layout: fixed;
    width: 100%;
}

.hack2 {
    display: table-cell;
    overflow-x: auto;
    width: 100%;
}

.my-custom-scrollbar {
    position: relative;
    height: 300px;
    overflow: auto;
}

.table-wrapper-scroll-y {
    display: block;
}
</style>   

<!-- WELCOME STARTS -->
<div class="banner" id="banner">
    <div style="background-image: url('../static/images/ttsh_building.jpg'); ">
        <div class="bg-overlay">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="banner-text">
                            <h2>Welcome to Roster Schedule!</h2>
                            <button type="button" class="contact-button" data-toggle="modal" data-target="#emailFilterModal">New Schedule</button>
                            <a class="contact-button" href="{{url_for('past_timetable')}}">Past Schedule</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- WELCOME ENDS -->

<!-- NEW SCHEDULE MODAL STARTS -->
<div class="modal fade bd-example-modal-sm" id="emailFilterModal" tabindex="-1" role="dialog" aria-labelledby="emailFilterModal" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="col text-center">
                <div class="modal-header">
                    <h3 class="modal-title" id="emailFilterModal">Generate Schedule For
                    <button type="button" class="close" data-dismiss="modal">&times;</button></h3>
                </div>
                <div class="modal-body">
                    <form action="{{url_for('populate_database')}}" method='post'>
                        Selected Month:
                        <select name='selected_month' class="form-control">
                            <option>January</option>
                            <option>February</option>
                            <option>March</option>
                            <option>April</option>
                            <option>May</option>
                            <option>June</option>
                            <option>July</option>
                            <option>August</option>
                            <option>September</option>
                            <option>October</option>
                            <option>November</option>
                            <option>December</option>
                        </select>
                        <br>
                        Start Date:
                        <input type='text' id="startDate" name='start_date' placeholder="dd-mm-yyyy" class="form-control"/>
                        <br>
                        End Date:
                        <input type='text' id="endDate" name='end_date' placeholder="dd-mm-yyyy" class="form-control"/>
                        <br><br>
                        <input class="contact-button" type='button' id="edit_constraints" value='Edit Constraints' onclick="editConstraints()"/>
                        <br><br>
                        <input class="contact-button" type='submit' value='Generate'/>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- NEW SCHEDULE MODAL ENDS -->

<!-- EDIT CONSTRAINT MODAL STARTS -->
<div class="modal fade bd-example-modal-sm" id="editConstraintsModal" tabindex="-1" role="dialog" aria-labelledby="emailFilterModal" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="col text-center">
                <div class="modal-header">
                    <h3 class="modal-title" id="editConstraintsModal">Edit Constraints
                    <button type="button" class="close" data-dismiss="modal">&times;</button></h3>
                </div>
                <form action="{{url_for('edit_constraints')}}" method="post">
                    <div class="modal-body">
                        <div class="row">
                            <div class="table-wrapper-scroll-y my-custom-scrollbar">
                            <div class="hack1">
                                <div class="hack2">
                                    <table class="table table-bordered table-striped mb-0" id="constraint_data">
                                        <thead>
                                            <tr>
                                                <th>Constraints</th>
                                                <th>Value</th>
                                            </tr>
                                        </thead>

                                        <tbody>
                                            <tr>
                                            {% for constraint, value in constraints.items() %}
                                                <td><b>{{constraint}}</b></td>
                                                <td><input type="text" name="{{constraint}}" value="{{value}}"/></td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                    <input class="contact-button" type='submit' value='Confirm'/>
                                    <br><br>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- EDIT CONSTRAINT MODAL ENDS -->

<script>
// TO CHANGE DATE FORMAT OF CALENDAR
$('input[id$=startDate]').datepicker({
    dateFormat: 'dd-mm-yy'
});

$('input[id$=endDate]').datepicker({
    dateFormat: 'dd-mm-yy'
});

// TO SHOW EDIT CONSTRAINT MODAL
function editConstraints() {
    $("#editConstraintsModal").modal("show");
}

</script>
{% endblock %}