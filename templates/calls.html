{% extends "base.html" %}

{% block title %}Calls{% endblock %}

{% block content %}

<style>
th {
    text-align:center;
}

table {
  width: 300%;
  border-collapse: collapse;
}

.hack1 {
  display: table;
  table-layout: fixed;
  width: 100%;
}

.hack2 {
  display: table-cell;
  overflow-x: auto;
  width: 100%;
}

.my-custom-scrollbar {
    position: relative;
    height: 300px;
    overflow: auto;
}

.table-wrapper-scroll-y {
    display: block;
}
</style>

<br><br>

<!-- PDF MODAL STARTS -->
<div class="modal fade bd-example-modal-sm" id="pdfModal" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="col text-center">
                <div class="modal-header">
                    <h3 class="modal-title">PDF Download
                    <button type="button" class="close" data-dismiss="modal">&times;</button></h3>
                </div>
                <div class="modal-body">
                    PDF downloaded successfully! Please check your folder.
                </div>
            </div>
        </div>
    </div>
</div>
<!-- PDF MODAL ENDS -->

<!-- CALL SUMMARY STARTS -->
<div class="portfolio" id="call_summary_table">
    <div class="container">
        <div class="row">
            <div class="col-md-12 text-center">
                <h3>Call Summary</h3>
                <div class="row">
                    <div class="table-wrapper-scroll-y my-custom-scrollbar">
                        <div class="hack1">
                            <div class="hack2">
                                <table class="table table-bordered table-striped mb-0">
                                    {% for table in call_summary_tables %}
                                    {{ table|safe }}
                                    {% endfor %}
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- BUTTON STARTS -->
<div class="call-to-action">
    <div style="background-image: url('../static/images/ttsh_building.jpg'); ">
        <div class="call-overlay">
            <div class="container">
                <div class="row">
                    <a class="contact-button" href="{{url_for('download_calls')}}" onclick="downloadPDF()">Download as PDF</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- BUTTON ENDS -->

<script>
// TO DOWNLOAD AS PDF
function downloadPDF() {
    $("#pdfModal").modal("show");
    window.stop();
}
</script>
    

{% endblock %}